---
- name: Print versions of various tools
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Get CLI tools versions
      command: "{{ item }}"
      loop:
        - ansible --version
        - git --version
        - curl --version
      register: cli_tools_output

    - name: Get Build tools versions
      command: "{{ item }}"
      loop:
        - python3 --version
        - make --version
        - gcc --version
      register: build_tools_output

    - name: Print CLI tools versions
      debug:
        msg: |
          CLI Tools:
          {% for item in cli_tools_output.results %}
          - {{ item.stdout.split('\n')[0] }}
          {% endfor %}

    - name: Print Build tools versions
      debug:
        msg: |
          Build Tools:
          {% for item in build_tools_output.results %}
          - {{ item.stdout.split('\n')[0] }}
          {% endfor %}
